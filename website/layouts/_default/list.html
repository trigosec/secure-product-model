{{ define "main" }}
<div class="container">
    <div class="list-content">
        <header class="content-header">
            <div class="breadcrumb">
                <a href="{{ "/" | relURL }}">Home</a>
                {{ if .Parent }}
                    <span class="breadcrumb-separator">/</span>
                    <a href="{{ .Parent.RelPermalink }}">{{ .Parent.Title }}</a>
                {{ end }}
                {{ if not .IsHome }}
                    <span class="breadcrumb-separator">/</span>
                    <span class="breadcrumb-current">{{ .Title }}</span>
                {{ end }}
            </div>

            <h1 class="content-title">{{ .Title }}</h1>

            {{ if .Description }}
            <p class="content-description">{{ .Description }}</p>
            {{ end }}

            {{ if .Content }}
            <div class="section-intro">
                {{ .Content }}
            </div>
            {{ end }}
        </header>

        {{ if .Pages }}
        <div class="page-grid">
            {{ range .Pages.ByWeight.ByTitle }}
            <article class="page-card">
                <div class="card-content">
                    <h2 class="card-title">
                        <a href="{{ .RelPermalink }}" class="card-link">{{ .Title }}</a>
                    </h2>

                    {{ if .Description }}
                    <p class="card-description">{{ .Description }}</p>
                    {{ else if .Summary }}
                    <p class="card-description">{{ .Summary | truncate 150 }}</p>
                    {{ end }}

                    <div class="card-meta">
                        {{ if .Date }}
                        <span class="meta-date">
                            <svg class="meta-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                            </svg>
                            {{ .Date.Format "Jan 2, 2006" }}
                        </span>
                        {{ end }}

                        {{ if .ReadingTime }}
                        <span class="meta-reading-time">
                            <svg class="meta-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12,6 12,12 16,14"></polyline>
                            </svg>
                            {{ .ReadingTime }} min read
                        </span>
                        {{ end }}

                        {{ if .Params.weight }}
                        <span class="meta-priority">
                            Priority: {{ .Params.weight }}
                        </span>
                        {{ end }}
                    </div>

                    {{ if .Params.tags }}
                    <div class="card-tags">
                        {{ range .Params.tags }}
                        <span class="tag">{{ . }}</span>
                        {{ end }}
                    </div>
                    {{ end }}
                </div>

                <div class="card-footer">
                    <a href="{{ .RelPermalink }}" class="read-more">
                        Read more
                        <svg class="read-more-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9,18 15,12 9,6"></polyline>
                        </svg>
                    </a>
                </div>
            </article>
            {{ end }}
        </div>
        {{ else }}
        <div class="no-content">
            <div class="no-content-icon">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14,2 14,8 20,8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10,9 9,9 8,9"></polyline>
                </svg>
            </div>
            <h3>No content yet</h3>
            <p>This section is currently being developed. Check back soon for updates.</p>
        </div>
        {{ end }}

        {{ if .Sections }}
        <div class="subsections">
            <h2 class="subsections-title">Subsections</h2>
            <div class="subsection-grid">
                {{ range .Sections }}
                <div class="subsection-card">
                    <h3 class="subsection-title">
                        <a href="{{ .RelPermalink }}" class="subsection-link">{{ .Title }}</a>
                    </h3>
                    {{ if .Description }}
                    <p class="subsection-description">{{ .Description }}</p>
                    {{ end }}
                    <div class="subsection-meta">
                        <span class="subsection-count">{{ len .Pages }} {{ if eq (len .Pages) 1 }}item{{ else }}items{{ end }}</span>
                    </div>
                </div>
                {{ end }}
            </div>
        </div>
        {{ end }}
    </div>
</div>
{{ end }}
